/*!
 * cxSelect 1.2
 * http://code.ciaoca.com/
 * https://github.com/ciaoca/cxSelect
 * E-mail: ciaoca@gmail.com
 * Released under the MIT license
 * Date: 2013-07-10
 */
!function(a){a.fn.cxSelect=function(b){var c,d,e,f,g,h,i,j,k,l,m;this.length<1||(b=a.extend({},a.cxSelect.defaults,b),b.selects.length&&(c=this,d=[],e=b.selects.length,h=function(a){return b.required?a:a-1},i=function(c,d){var f,e=d||"请选择";return b.required||(f="<option value='0'>"+e+"</option>"),a.each(c,function(a,b){f+="undefined"!=typeof b.v&&b.v?"<option value='"+b.v+"'>"+b.n+"</option>":"<option value='"+b.n+"'>"+b.n+"</option>"}),f},j=[],k=function(){var a;for(a=0;e>a;a++)d.push(c.find("select."+b.selects[a]));for(g=i(f,d[0].data("title")),d[0].html(g),a=0;e>a;a++)d[a].data("val")?j.push(a):d[a].attr("disabled")&&("none"==b.nodata?d[a].css("display","none"):"hidden"==b.nodata&&d[a].css("visibility","hidden"));c.delegate("select","change",function(){m(this.className)}),l()},l=function(a){if(j.length){var b=a||0;b<j.length&&setTimeout(function(){d[b].val(d[b].data("val")).trigger("change"),b++,l(b)},1)}},m=function(a){var j,k,l,m,c=[];for(m=0;e>m;m++)c.push(h(d[m].get(0).selectedIndex)),(j||m>j)&&(d[m].empty().attr("disabled",!0),"none"==b.nodata?d[m].css("display","none"):"hidden"==b.nodata&&d[m].css("visibility","hidden")),a.indexOf(b.selects[m])>-1&&(j=m);for(k=j+1,l=f,m=0;k>m;m++){if("undefined"==typeof l[c[m]]||!l[c[m]].s||!l[c[m]].s.length)return;l=l[c[m]].s}d[k]&&(g=i(l,d[k].data("title")),d[k].html(g).attr("disabled",!1).css({display:"",visibility:""}))},a.getJSON(b.url,function(a){f=a,k()})))},a.cxSelect={defaults:{url:"js/city.js",selects:[],nodata:null,required:!1}}}(jQuery);